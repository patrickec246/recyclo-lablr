
{% include "header.html" %}

{% include "modal.html" %}

<div class="canvas">
	<!-- div for canvas -->
	<div class="canvasDiv">
	<canvas id="polyCanvas" width="1920" height="1080" style="cursor:crosshair"></canvas>
	</div>

	<div class="shapeDock" id="shapeDock">
		<div class="closeButton pointerHover" id="closeBtn"><b>x</b></div>

		<div class="shapeForm">
			<div class="input-group mb-3">
	  			<div class="input-group-prepend">
	    			<span class="input-group-text" id="basic-addon1">Type</span>
	  			</div>
	  			<input type="text" class="form-control" aria-label="type" aria-describedby="basic-addon1" id="typeLabel">
			</div>
			<div class="input-group mb-3">
	  			<div class="input-group-prepend">
	    			<span class="input-group-text" id="basic-addon3">Features</span>
	  			</div>
	  			<input type="text" class="form-control" aria-label="producer" aria-describedby="basic-addon3" id="featuresLabel">
			</div>
			<div class="input-group mb-3">
	  			<div class="input-group-prepend">
	    			<span class="input-group-text" id="basic-addon2">Producer</span>
	  			</div>
	  			<input type="text" class="form-control"  aria-label="producer" aria-describedby="basic-addon2" id="producerLabel">
			</div>
		</div>

		<div class="shapeButtons pointerHover">
			<i class="fa fa-trash-o pointerHover" style="font-size:1.5em;color:rgba(200, 0, 0, .6);float:left" onclick="delete_selected_shape()" id="deletePoint"></i>
			<i class="fa fa-check pointerHover" style="font-size:1.5em;color:rgba(0, 150, 0, .6);float:right" onclick="update_selected_shape()" id="savePoint"></i>
		</div>
	</div>
	
	<div class="cpanel">
		<hr class="low-hr"/>
		<center id="labelStats">
			Images labeled:
			<br/>
			<span class="badge badge-info" id="imgCounter">0 images</span>
			<br/><br/>

			Estimated effect:<br/>
			<span class="badge badge-success" id="mAPCounter">+ 0.0% mAP</span>
		</center>
		<hr/>

		<div class="shapeButtons">
			<div class="form-check" id="loadPolys">
				<input class="form-check-input" type="checkbox" value="" id="loadAnnotations">
				<label class="form-check-label smallish-label">
					Load Polygons from Server
				</label>
				<label class="small-label">
					If a frame has already been labeled, those annotations can be requested from the server for quick verification/tweaking.
				</label>
			</div>
			<hr class="low-hr"/>
			<div class="form-check" id="requestSequential">
				<input class="form-check-input" type="checkbox" value="" id="sequentialFrames">
				<label class="form-check-label smallish-label">
					Request Sequential Frames
				</label>
				<label class="small-label">
					Request the next frame from the current frame's video sequence if available. By default, the next image will be a random image.
				</label>
			</div>
			<hr class="low-hr"/>
			<div class="form-check" id="prevAnnotations">
				<input class="form-check-input" type="checkbox" value="" disabled="true" id="previousAnnotations">
				<label class="form-check-label smallish-label">
					Keep Last Frame Polygons
				</label>
				<label class="small-label">
					When loading sequential frames from a video, load the polygons from the last frame for quick verification/tweaking.
				</label>
			</div>
			<hr class="low-hr"/>
			<button class="btn btn-outline-primary btn-sm longButton" onclick="addShape()" id="addPoly">
				Add Polygon 🆕
			</button>

			<button class="btn btn-outline-danger btn-sm longButton" onclick="clearShapes()" id="clearPoly">
				Clear Polygons 🚫
			</button>

			<button class="btn btn-outline-secondary btn-sm longButton" onclick="skipImage()" id="skipImage">
				Skip Image ⏭️
			</button>

			<button class="btn btn-outline-success btn-sm longButton" onclick="submitLabels()" id="submitLabels">
			Submit Label 👍
			</button>
		</div>
	</div>
</div>


<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="./static/js/hop.js" type="text/javascript"></script>
<script src="./static/js/point_manager.js" type="text/javascript"></script>
<script src="./static/js/canvas.js" type="text/javascript"></script>
